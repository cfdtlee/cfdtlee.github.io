<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>iOS-Analysis of Card Game project | cfdtlee</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="description" content="Card.h12@property (strong, nonatomic) NSString *contents; //generate getters and setters for the properties

All objects are in heap, objective-c will">
  
  
    <link rel="alternate" href="/atom.xml" title="cfdtlee" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox-1.3.4.css">

  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">cfdtlee</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">We do what we have to do, so we can do what we want to do</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
      </nav>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-iOS-Analysis_of_Card_Game_project" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2015/12/09/iOS-Analysis_of_Card_Game_project/" class="article-date">
  <time class="dt-published" datetime="2015-12-08T19:56:28.000Z" itemprop="datePublished">2015-12-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      iOS-Analysis of Card Game project
    </h1>
  

      </header>
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Card-h"><a href="#Card-h" class="headerlink" title="Card.h"></a>Card.h</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *contents; </span><br><span class="line"><span class="comment">//generate getters and setters for the properties</span></span><br></pre></td></tr></table></figure>

<p>All objects are in heap, objective-c will manage all storage for you,</p>
<ul>
<li><p><code>strong</code> means keep the memory for this as long as anyone has a strong pointer to it, as soon as no sttong pointer, remove it, it is called “reference counting”;   </p>
</li>
<li><p><code>weak</code> means no strong pointer to it, set it to <code>nil</code>.  </p>
</li>
<li><p><code>nonatomic</code> means not thread safe</p>
</li>
</ul>
 <!--readmore-->

<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">getter</span>=isChosen) <span class="built_in">BOOL</span> chosen; </span><br><span class="line"><span class="comment">// rename the getter</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">getter</span>=isMatched) <span class="built_in">BOOL</span> matched; </span><br><span class="line"><span class="comment">// they don&#x27;t need strong, because they are primitive type and don&#x27;t stored in heap, no memory to manage, still have nonatomic, because we want getter and setter to be simple, don&#x27;t have any locking code</span></span><br></pre></td></tr></table></figure>

<p>Why do we need getter and setter? </p>
<p>Bound checking, side effect say update UI when we set the property, manage memory.</p>
<h2 id="viewController-m"><a href="#viewController-m" class="headerlink" title="viewController.m"></a>viewController.m</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">weak</span>, <span class="keyword">nonatomic</span>) <span class="keyword">IBOutlet</span> <span class="built_in">UILabel</span> *scoreLabel;</span><br></pre></td></tr></table></figure>

<p>@property created by this process is weak because the MVC’s View already keeps a strong pointer to the UILabel, so there’s no need for the Controller to do so as well. And if the UILabel ever left the View, the Controller most likely wouldn’t want a pointer to it anyway (but if you did want to keep a pointer to it even if it left the View, you could change this to strong (very rare)).</p>
<p>IBOutlet is a keyword Xcode puts here (similar to IBAction) to remind Xcode that this is not just a random @property, it’s an outlet</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) IBOutletCollection(<span class="built_in">UIButton</span>) <span class="built_in">NSArray</span> *cardButtons;</span><br></pre></td></tr></table></figure>

<p>Outlet Collection arrays are always strong While the View will point strong, so Xcode has removed that option from the dialog. While the view will point strongly to all of the buttons inside the array, it will not point to the array itself at all(only our Controller will) so our outlet needs to be strongly held in the heap by our Controller. This is now an NSArray which contains all UIButtons you connected in random order. This randomness is okay for our purposes because the order of these cards will mean nothing to our matching game. It is something to consider though if you are developing an app where the order does matter (in that case, an outlet collection may not be what you want).</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">IBAction</span>)touchCardButton:(<span class="built_in">UIButton</span> *)sender &#123;</span><br><span class="line">    <span class="built_in">NSUInteger</span> choseButtonIndex = [<span class="keyword">self</span>.cardButtons indexOfObject: sender];</span><br><span class="line">    [<span class="keyword">self</span>.game chooseCardAtIndex: choseButtonIndex];</span><br><span class="line">    [<span class="keyword">self</span> updateUI];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This method’s return type is actually, but Xcode uses the typedef IBAction instead just so that Xcode can keep track that this is not just a void random method that returns void, but rather, it’s an action method. Apart from that, IBAction is exactly the same thing as void.</p>
<h2 id="Deck-m"><a href="#Deck-m" class="headerlink" title="Deck.m"></a>Deck.m</h2><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSMutableArray</span> *cards;</span><br></pre></td></tr></table></figure>

<p>Declaring a @property makes space in the instance for the￼ pointer itself allocate space in the heap for the, but does not ￼￼￼￼object the pointer points</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">-</span>(<span class="type">NSMutableArray</span> <span class="operator">*</span>)cards&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="operator">!</span>_cards) _cards <span class="operator">=</span> [[<span class="type">NSMutableArray</span> alloc] <span class="keyword">init</span>];</span><br><span class="line">    <span class="keyword">return</span> _cards;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If we send message to nil, nothing will happened, no error will happen, just return 0.<br>Lazy instantiation: initialise until we need to use.</p>
<h2 id="PlayingCard-m"><a href="#PlayingCard-m" class="headerlink" title="PlayingCard.m"></a>PlayingCard.m</h2><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+(NSArray *)validSuits &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="symbol">@[</span>@<span class="string">&quot;♣&quot;</span>, @<span class="string">&quot;♦&quot;</span>, @<span class="string">&quot;♥&quot;</span>, @<span class="string">&quot;♠&quot;</span>]<span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>A plus method is a class method, send message to class, not to instance of an object. Careating things, like string format; utility method like this, return constance(Usually these are either creation methods(like alloc or stringWithFormat: or utility methods.)</p>

      
    </div>
    <footer class="article-footer">
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/12/10/iOS-bugs/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          X-Code bugs
        
      </div>
    </a>
  
  
    <a href="/2015/12/09/iOS-View_Controller_Lifecycle/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">
        
          iOS-View Controller Lifecycle
        
      </div>
    </a>
  
</nav>

  
</article>


</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 Shuang Li<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a><br>
      <a target="_blank" rel="noopener" href="https://beian.miit.gov.cn">陕ICP备2021014297号</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    


<script src="/js/jquery-1.4.3.min.js"></script>


  
<script src="/fancybox/jquery.fancybox-1.3.4.js"></script>




<script src="/js/script.js"></script>






<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

  </div>
</body>
</html>